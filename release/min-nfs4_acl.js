(function(){var i={},n=function(){!function(i){i.addPermission=function(i,n){for(var t=0;t<n.length;t++){var e=n[t];i.permissions.indexOf(e)<0&&(i.permissions+=e)}},i.allowGroup=function(i,n){var t=!1,e=this;this.map(function(r){return r.principal!=i||r.flags.indexOf("g")>=0||("A"==r.type&&(t=!0,e.addPermission(r,n)),"D"==r.type&&e.removePermission(r,n)),r}),t||this.push("A:g:"+i+":"+n)},i.allowUser=function(i,n){var t=!1,e=this;this.map(function(r){return r.principal!=i||r.flags.indexOf("g")>=0||("A"==r.type&&(t=!0,e.addPermission(r,n)),"D"==r.type&&e.removePermission(r,n)),r}),t||this.push("A::"+i+":"+n)},i.denyGroup=function(i,n){var t=!1,e=this;this.map(function(r){return r.principal!=i||r.flags.indexOf("g")>=0||(t=!0,"A"==r.type&&e.removePermission(r,n),"D"==r.type&&e.addPermission(r,n)),r}),t||this.push("D:g:"+i+":"+n)},i.denyUser=function(i,n){var t=!1,e=this;this.map(function(r){return r.principal!=i||r.flags.indexOf("g")>=0||("A"==r.type&&e.removePermission(r,n),"D"==r.type&&(t=!0,e.addPermission(r,n))),r}),t||this.push("D::"+i+":"+n)},i.filter=function(i){var n=this._acl.split("\n");return n.filter(i),this._acl=n.join("\n"),this},i.find=function(i,n,t){return this.has(i,n,t)},i.fromObject=function(i){return i.type+":"+i.flags+":"+i.principal+":"+i.permissions},i.getACL=function(){return this._acl},i.has=function(i,n,t){for(var e,r,s=0,a=0,c=0,l=this._acl.length,f=!1,o=0,h=!1,u=!1,p=0,_=0,m=!1;l>s;)if(":"!=this._acl.charAt(s))if("\n"!=this._acl.charAt(s))if(0!=a)1!=c?2!=c?3!=c?(a++,s++):(!h||u||m||t.indexOf(this._acl.charAt(s))>=0&&_++,a++,s++):(f?this._acl.charAt(s)==n.charAt(o++)?h=!0:(h=!1,u=!0):this._acl.charAt(s)==i.charAt(o++)?h=!0:(h=!1,u=!0),a++,s++):(r=this._acl.charAt(s),"g"==r&&(f=!0),"i"==r&&(m=!0),a++,s++);else{if(_>0&&t.length==_){if("A"==e)return!0;if("D"==e)return!1}m=!1,e=this._acl.charAt(s),a++,s++,h=!1,u=!1,o=0,p=0,_=0,f=!1}else a=0,c=0,s++;else a++,c++,s++;if(_>0&&t.length==_){if("A"==e)return!0;if("D"==e)return!1}return!1},i.__traitInit&&!i.hasOwnProperty("__traitInit")&&(i.__traitInit=i.__traitInit.slice()),i.__traitInit||(i.__traitInit=[]),i.__traitInit.push(function(i){this._acl=i.trim()}),i.map=function(i){if(0==this._acl.length)return this;var n=this._acl.split("\n"),t=n.map(this.toObject).map(i).map(this.fromObject);return this._acl=t.join("\n").trim(),this},i.push=function(i){var n=this._acl.length;this._acl+=0==n||"\n"==this._acl.charAt(n-1)?i:"\n"+i,this._acl=this._acl.trim()},i.reduce=function(i,n){var t=this._acl.split("\n");return t.reduce(i,n),this._acl=t.join("\n"),this},i.removeAll=function(){this._acl=""},i.removePermission=function(i,n){for(var t=0;t<n.length;t++){var e=n[t];i.permissions.indexOf(e)>=0&&(i.permissions=i.permissions.replace(e,""))}},i.replaceLines=function(i){for(var n=this._acl.split("\n"),t=0;t<n.length;t++){var e=i(n[t]);e&&(n[t]=e)}},i.toObject=function(i){var n={};if(!i)return n;var t=i.split(":");return i.length>0&&(n.type=i.charAt(0),n.flags=t[1],n.principal=t[2],n.permissions=t[3]),n}}(this)},t=function(i,n,e,r,s,a,c,l){var f,o=this;if(!(o instanceof t))return new t(i,n,e,r,s,a,c,l);var h=[i,n,e,r,s,a,c,l];if(o.__factoryClass)if(o.__factoryClass.forEach(function(i){f=i.apply(o,h)}),"function"==typeof f){if(f._classInfo.name!=t._classInfo.name)return new f(i,n,e,r,s,a,c,l)}else if(f)return f;o.__traitInit?o.__traitInit.forEach(function(i){i.apply(o,h)}):"function"==typeof o.init&&o.init.apply(o,h)};t._classInfo={name:"nfs4_acl"},t.prototype=new n,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(i.nfs4_acl=t,this.nfs4_acl=t):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports.nfs4_acl=t:this.nfs4_acl=t}.call(new Function("return this")()),"undefined"!=typeof define&&null!==define&&null!=define.amd&&define(i)}).call(new Function("return this")());