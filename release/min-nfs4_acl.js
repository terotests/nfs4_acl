(function(){var i={},t=function(){!function(i){i.addPermission=function(i,t){for(var n=0;n<t.length;n++){var r=t[n];i.permissions.indexOf(r)<0&&(i.permissions+=r)}},i.allowGroup=function(i,t){var n=!1,r=this;this.map(function(e){return e.principal!=i||e.flags.indexOf("g")>=0||("A"==e.type&&(n=!0,r.addPermission(e,t)),"D"==e.type&&r.removePermission(e,t)),e}),n||this.push("A:g:"+i+":"+t)},i.allowUser=function(i,t){var n=!1,r=this;this.map(function(e){return e.principal!=i||e.flags.indexOf("g")>=0||("A"==e.type&&(n=!0,r.addPermission(e,t)),"D"==e.type&&r.removePermission(e,t)),e}),n||this.push("A::"+i+":"+t)},i.denyGroup=function(i,t){var n=!1,r=this;this.map(function(e){return e.principal!=i||e.flags.indexOf("g")>=0||(n=!0,"A"==e.type&&r.removePermission(e,t),"D"==e.type&&r.addPermission(e,t)),e}),n||this.push("D:g:"+i+":"+t)},i.denyUser=function(i,t){var n=!1,r=this;this.map(function(e){return e.principal!=i||e.flags.indexOf("g")>=0||("A"==e.type&&r.removePermission(e,t),"D"==e.type&&(n=!0,r.addPermission(e,t))),e}),n||this.push("D::"+i+":"+t)},i.filter=function(i){var t=this._acl.split("\n");return t.filter(i),this._acl=t.join("\n"),this},i.find=function(i,t,n){return this.has(i,t,n)},i.fromObject=function(i){return i.type+":"+i.flags+":"+i.principal+":"+i.permissions},i.getACL=function(){return this._acl},i.has=function(i,t,n){for(var r,e,s=0,a=0,c=0,f=this._acl.length,o=!1,l=0,h=!1,u=!1,p=0,_=0,m=!1;f>s;)if(":"!=this._acl.charAt(s))if("\n"!=this._acl.charAt(s))if(0!=a)1!=c?2!=c?3!=c?(a++,s++):(!h||u||m||n.indexOf(this._acl.charAt(s))>=0&&_++,a++,s++):(o?this._acl.charAt(s)==t.charAt(l++)?h=!0:(h=!1,u=!0):this._acl.charAt(s)==i.charAt(l++)?h=!0:(h=!1,u=!0),a++,s++):(e=this._acl.charAt(s),"g"==e&&(o=!0),"i"==e&&(m=!0),a++,s++);else{if(_>0&&n.length==_){if("A"==r)return!0;if("D"==r)return!1}m=!1,r=this._acl.charAt(s),a++,s++,h=!1,u=!1,l=0,p=0,_=0,o=!1}else a=0,c=0,s++;else a++,c++,s++;if(_>0&&n.length==_){if("A"==r)return!0;if("D"==r)return!1}return!1},i.__traitInit&&!i.hasOwnProperty("__traitInit")&&(i.__traitInit=i.__traitInit.slice()),i.__traitInit||(i.__traitInit=[]),i.__traitInit.push(function(i){this._acl=i.trim()}),i.map=function(i){if(0==this._acl.length)return this;var t=this._acl.split("\n"),n=t.map(this.toObject).map(i).map(this.fromObject);return this._acl=n.join("\n").trim(),this},i.push=function(i){var t=this._acl.length;this._acl+=0==t||"\n"==this._acl.charAt(t-1)?i:"\n"+i,this._acl=this._acl.trim()},i.reduce=function(i,t){var n=this._acl.split("\n");return n.reduce(i,t),this._acl=n.join("\n"),this},i.removeAll=function(){this._acl=""},i.removePermission=function(i,t){for(var n=0;n<t.length;n++){var r=t[n];i.permissions.indexOf(r)>=0&&(i.permissions=i.permissions.replace(r,""))}},i.replaceLines=function(i){for(var t=this._acl.split("\n"),n=0;n<t.length;n++){var r=i(t[n]);r&&(t[n]=r)}},i.toObject=function(i){var t={};if(!i)return t;var n=i.split(":");return i.length>0&&(t.type=i.charAt(0),t.flags=n[1],t.principal=n[2],t.permissions=n[3]),t}}(this)},n=function(i,t,r,e,s,a,c,f){var o,l=this;if(!(l instanceof n))return new n(i,t,r,e,s,a,c,f);var h=[i,t,r,e,s,a,c,f];if(l.__factoryClass)if(l.__factoryClass.forEach(function(i){o=i.apply(l,h)}),"function"==typeof o){if(o._classInfo.name!=n._classInfo.name)return new o(i,t,r,e,s,a,c,f)}else if(o)return o;l.__traitInit?l.__traitInit.forEach(function(i){i.apply(l,h)}):"function"==typeof l.init&&l.init.apply(l,h)};n._classInfo={name:"nfs4_acl"},n.prototype=new t,"undefined"!=typeof define&&null!==define&&null!=define.amd&&define(i)}).call(new Function("return this")());