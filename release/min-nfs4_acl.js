var nfs4_acl_prototype=function(){"use strict";!function(t){t.addPermission=function(t,i){for(var n=0;n<i.length;n++){var s=i[n];t.permissions.indexOf(s)<0&&(t.permissions+=s)}},t.allowGroup=function(t,i){var n=!1,s=this;this.map(function(r){return r.principal!=t||r.flags.indexOf("g")>=0||("A"==r.type&&(n=!0,s.addPermission(r,i)),"D"==r.type&&s.removePermission(r,i)),r}),n||this.push("A:g:"+t+":"+i)},t.allowUser=function(t,i){var n=!1,s=this;this.map(function(r){return r.principal!=t||r.flags.indexOf("g")>=0||("A"==r.type&&(n=!0,s.addPermission(r,i)),"D"==r.type&&s.removePermission(r,i)),r}),n||this.push("A::"+t+":"+i)},t.denyGroup=function(t,i){var n=!1,s=this;this.map(function(r){return r.principal!=t||r.flags.indexOf("g")>=0||(n=!0,"A"==r.type&&s.removePermission(r,i),"D"==r.type&&s.addPermission(r,i)),r}),n||this.push("D:g:"+t+":"+i)},t.denyUser=function(t,i){var n=!1,s=this;this.map(function(r){return r.principal!=t||r.flags.indexOf("g")>=0||("A"==r.type&&s.removePermission(r,i),"D"==r.type&&(n=!0,s.addPermission(r,i))),r}),n||this.push("D::"+t+":"+i)},t.filter=function(t){var i=this._acl.split("\n");return i.filter(t),this._acl=i.join("\n"),this},t.find=function(t,i,n){return this.has(t,i,n)},t.fromObject=function(t){return t.type+":"+t.flags+":"+t.principal+":"+t.permissions},t.has=function(t,i,n){for(var s,r,e=0,a=0,c=0,o=this._acl.length,f=!1,l=0,h=!1,p=!1,_=0,u=0,m=!1;o>e;)if(":"!=this._acl.charAt(e))if("\n"!=this._acl.charAt(e))if(0!=a)1!=c?2!=c?3!=c?(a++,e++):(!h||p||m||n.indexOf(this._acl.charAt(e))>=0&&u++,a++,e++):(f?this._acl.charAt(e)==i.charAt(l++)?h=!0:(h=!1,p=!0):this._acl.charAt(e)==t.charAt(l++)?h=!0:(h=!1,p=!0),a++,e++):(r=this._acl.charAt(e),"g"==r&&(f=!0),"i"==r&&(m=!0),a++,e++);else{if(u>0&&n.length==u){if("A"==s)return!0;if("D"==s)return!1}m=!1,s=this._acl.charAt(e),a++,e++,h=!1,p=!1,l=0,_=0,u=0,f=!1}else a=0,c=0,e++;else a++,c++,e++;if(u>0&&n.length==u){if("A"==s)return!0;if("D"==s)return!1}return!1},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t){this._acl=t.trim()}),t.map=function(t){if(0==this._acl.length)return this;var i=this._acl.split("\n"),n=i.map(this.toObject).map(t).map(this.fromObject);return this._acl=n.join("\n").trim(),this},t.push=function(t){var i=this._acl.length;this._acl+=0==i||"\n"==this._acl.charAt(i-1)?t:"\n"+t,this._acl=this._acl.trim()},t.reduce=function(t,i){var n=this._acl.split("\n");return n.reduce(t,i),this._acl=n.join("\n"),this},t.removeAll=function(){this._acl=""},t.removePermission=function(t,i){for(var n=0;n<i.length;n++){var s=i[n];t.permissions.indexOf(s)>=0&&(t.permissions=t.permissions.replace(s,""))}},t.replaceLines=function(t){for(var i=this._acl.split("\n"),n=0;n<i.length;n++){var s=t(i[n]);s&&(i[n]=s)}},t.toObject=function(t){var i={};if(!t)return i;var n=t.split(":");return t.length>0&&(i.type=t.charAt(0),i.flags=n[1],i.principal=n[2],i.permissions=n[3]),i}}(this)},nfs4_acl=function(t,i,n,s,r,e,a,c){if(!(this instanceof nfs4_acl))return new nfs4_acl(t,i,n,s,r,e,a,c);var o=[t,i,n,s,r,e,a,c];if(this.__factoryClass){var f,l=this;if(this.__factoryClass.forEach(function(t){f=t.apply(l,o)}),"[object Function]"==Object.prototype.toString.call(f)){if(f._classInfo.name!=nfs4_acl._classInfo.name)return new f(t,i,n,s,r,e,a,c)}else if(f)return f}if(this.__traitInit){var l=this;this.__traitInit.forEach(function(t){t.apply(l,o)})}else"function"==typeof this.init&&this.init.apply(this,o)};nfs4_acl._classInfo={name:"nfs4_acl"},nfs4_acl.prototype=new nfs4_acl_prototype,"undefined"!=typeof window&&(window.nfs4_acl=nfs4_acl),"undefined"!=typeof window&&(window.nfs4_acl_prototype=nfs4_acl_prototype);